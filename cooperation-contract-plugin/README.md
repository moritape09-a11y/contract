# افزونه قرارداد همکاری - Cooperation Contract Plugin

یک افزونه وردپرس برای مدیریت قراردادهای همکاری با امضای دیجیتال و تقویم شمسی.

## ویژگی‌ها

- ✅ نمایش متن قرارداد قابل تنظیم
- ✅ فرم ثبت اطلاعات با فیلدهای زیر:
  - نام و نام خانوادگی
  - نام آموزشگاه
  - سمت/عنوان
  - آدرس
  - تاریخ قرارداد (با تقویم شمسی)
  - انتخاب طرح (طرح سایت، طرح گروه، طرح طلایی)
- ✅ امضای دیجیتال با موس یا لمس صفحه
- ✅ ذخیره اطلاعات در دیتابیس
- ✅ پنل مدیریت برای مشاهده و حذف قراردادها
- ✅ پشتیبانی کامل از زبان فارسی و RTL
- ✅ طراحی ریسپانسیو

## نصب و راه‌اندازی

### روش 1: نصب از طریق پنل مدیریت وردپرس

1. فایل افزونه را به صورت ZIP فشرده کنید:
```bash
cd cooperation-contract-plugin
zip -r cooperation-contract-plugin.zip .
```

2. وارد پنل مدیریت وردپرس شوید
3. به قسمت **افزونه‌ها > افزودن** بروید
4. روی دکمه **بارگذاری افزونه** کلیک کنید
5. فایل ZIP را انتخاب و آپلود کنید
6. افزونه را فعال کنید

### روش 2: نصب دستی

1. پوشه `cooperation-contract-plugin` را به مسیر زیر کپی کنید:
```
wp-content/plugins/
```

2. وارد پنل مدیریت وردپرس شوید
3. به قسمت **افزونه‌ها** بروید
4. افزونه "قرارداد همکاری" را فعال کنید

## تنظیمات

### 1. تنظیم متن قرارداد

1. در پنل مدیریت به **قراردادهای همکاری > تنظیمات** بروید
2. متن قرارداد خود را در ویرایشگر وارد کنید
3. روی دکمه **ذخیره تنظیمات** کلیک کنید

### 2. افزودن فرم به صفحات

برای نمایش فرم قرارداد در هر صفحه یا پست، از شورت‌کد زیر استفاده کنید:

```
[cooperation_contract]
```

#### مثال: ایجاد صفحه قرارداد

1. به **صفحات > افزودن** بروید
2. عنوان صفحه را وارد کنید (مثلاً "قرارداد همکاری")
3. در محتوا، شورت‌کد `[cooperation_contract]` را قرار دهید
4. صفحه را منتشر کنید

## استفاده

### برای کاربران

1. وارد صفحه قرارداد شوید
2. متن قرارداد را بخوانید
3. فرم را با اطلاعات خود پر کنید:
   - نام و نام خانوادگی
   - نام آموزشگاه
   - سمت یا عنوان شغلی
   - آدرس
   - تاریخ قرارداد (با کلیک روی فیلد، تقویم شمسی باز می‌شود)
   - یکی از طرح‌ها را انتخاب کنید
4. در کادر امضا، با موس یا لمس صفحه امضای خود را بکشید
5. در صورت نیاز به تغییر امضا، روی دکمه "پاک کردن امضا" کلیک کنید
6. روی دکمه **ثبت قرارداد** کلیک کنید

### برای مدیران

#### مشاهده قراردادها

1. به **قراردادهای همکاری** در پنل مدیریت بروید
2. لیست تمام قراردادهای ثبت شده را مشاهده کنید
3. برای مشاهده جزئیات هر قرارداد، روی دکمه **مشاهده** کلیک کنید

#### حذف قرارداد

1. در لیست قراردادها، روی دکمه **حذف** کنار قرارداد مورد نظر کلیک کنید
2. عملیات را تأیید کنید

## ساختار دیتابیس

افزونه یک جدول با نام `wp_cooperation_contracts` ایجاد می‌کند که شامل فیلدهای زیر است:

- `id`: شناسه یکتا
- `first_name`: نام
- `last_name`: نام خانوادگی
- `institution_name`: نام آموزشگاه
- `position`: سمت/عنوان
- `address`: آدرس
- `contract_date`: تاریخ قرارداد (شمسی)
- `selected_plan`: طرح انتخابی
- `signature_data`: داده امضای دیجیتال (Base64)
- `created_at`: تاریخ ثبت
- `user_id`: شناسه کاربر (در صورت ورود)
- `ip_address`: آدرس IP

## ساختار فایل‌ها

```
cooperation-contract-plugin/
├── cooperation-contract.php       # فایل اصلی افزونه
├── includes/
│   ├── class-database.php        # مدیریت دیتابیس
│   ├── class-admin.php           # پنل مدیریت
│   └── class-frontend.php        # نمایش فرونت‌اند
├── assets/
│   ├── css/
│   │   ├── style.css             # استایل اصلی
│   │   └── persian-datepicker.min.css
│   └── js/
│       ├── script.js             # جاوااسکریپت اصلی
│       └── persian-datepicker.min.js
└── README.md
```

## کتابخانه‌های استفاده شده

- **Signature Pad**: برای امضای دیجیتال (v4.1.7)
- **Persian Date Picker**: برای انتخاب تاریخ شمسی (v1.2.0)

## سفارشی‌سازی

### تغییر استایل

فایل `assets/css/style.css` را ویرایش کنید. تمام کلاس‌ها با پیشوند `.cooperation-contract-` شروع می‌شوند.

### افزودن فیلدهای جدید

1. در فایل `includes/class-frontend.php` فیلد جدید را به فرم اضافه کنید
2. در فایل `includes/class-database.php` فیلد را به جدول و متدها اضافه کنید
3. در فایل `assets/js/script.js` فیلد را به داده‌های ارسالی اضافه کنید

## پشتیبانی از مرورگرها

- Chrome (آخرین نسخه)
- Firefox (آخرین نسخه)
- Safari (آخرین نسخه)
- Edge (آخرین نسخه)
- مرورگرهای موبایل (Android/iOS)

## امنیت

- تمام ورودی‌ها Sanitize می‌شوند
- استفاده از WordPress Nonce برای جلوگیری از CSRF
- ذخیره امن آدرس IP
- اعتبارسنجی داده‌ها در سمت سرور

## حذف افزونه

برای حذف کامل افزونه:

1. افزونه را غیرفعال کنید
2. افزونه را حذف کنید
3. برای حذف دیتابیس (اختیاری):
```sql
DROP TABLE wp_cooperation_contracts;
```

## نیازمندی‌ها

- وردپرس نسخه 5.0 یا بالاتر
- PHP نسخه 7.0 یا بالاتر
- MySQL نسخه 5.6 یا بالاتر

## نکات مهم

- قبل از نصب، از دیتابیس و فایل‌های وردپرس خود نسخه پشتیبان تهیه کنید
- برای استفاده بهینه، از HTTPS استفاده کنید
- امضاها به صورت Base64 ذخیره می‌شوند و ممکن است حجم زیادی داشته باشند

## مجوز

این افزونه تحت مجوز GPL v2 یا بالاتر منتشر شده است.

## تماس و پشتیبانی

برای گزارش مشکلات یا پیشنهادات، لطفاً یک Issue در مخزن پروژه ایجاد کنید.
