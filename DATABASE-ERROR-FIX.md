# ๐ง ุฑูุน ุฎุทุง ุฏุชุงุจุณ - Database Error Fix

---

## โ ุฎุทุง:
```
ุฎุทุง ุฏุฑ ุซุจุช ูุฑุงุฑุฏุงุฏ ุฏุฑ ุฏุชุงุจุณ. ูุทูุง ุฏูุจุงุฑู ุชูุงุด ฺฉูุฏ.
```

---

## ๐ ุนูู ุงุญุชูุงู:

1. ุฌุฏูู ุฏุชุงุจุณ ุงุฌุงุฏ ูุดุฏู
2. ุณุชููโูุง ุฌุฏูู ุจุง ฺฉุฏ ูุทุงุจูุช ูุฏุงุฑุฏ
3. ุฎุทุง ุฏุฑ activation hook
4. ูุดฺฉู permissions

---

## โ ุฑุงูโุญูโูุง:

### ุฑูุด 1๏ธโฃ: ุบุฑูุนุงู ู ูุนุงู ฺฉุฑุฏู ุงูุฒููู (ุณุงุฏูโุชุฑู)

```
1. ุฏุงุดุจูุฑุฏ โ ุงูุฒูููโูุง
2. ูุฑุงุฑุฏุงุฏ ููฺฉุงุฑ โ ุบุฑูุนุงู
3. ุตุจุฑ ฺฉูุฏ 2 ุซุงูู
4. ูุนุงู ฺฉูุฏ
5. ุชุณุช ฺฉูุฏ
```

ุงู ฺฉุงุฑ activation hook ุฑุง ุฏูุจุงุฑู ุงุฌุฑุง ูโฺฉูุฏ ู ุฌุฏูู ุฑุง ูโุณุงุฒุฏ.

---

### ุฑูุด 2๏ธโฃ: ุงุฌุฑุง ุงุณฺฉุฑูพุช Fix (ุญุฑููโุง)

ฺฉ ูุงู ุฏุฑ ุงูุฒููู ฺฏุฐุงุดุชูโุงู: `fix-database.php`

**ูุญูู ุงุณุชูุงุฏู:**

```
1. ุจู FTP ุง File Manager ูุชุตู ุดูุฏ
2. ุจู ูุณุฑ ุจุฑูุฏ:
   wp-content/plugins/cooperation-contract-plugin/

3. ูุงู fix-database.php ุฑุง ูพุฏุง ฺฉูุฏ

4. ุฏุฑ ูุฑูุฑฺฏุฑ ุจุงุฒ ฺฉูุฏ:
   https://yoursite.com/wp-content/plugins/cooperation-contract-plugin/fix-database.php

5. ุตูุญู ุจุงุฒ ูโุดูุฏ ู ุฌุฏูู ุฑุง ูโุณุงุฒุฏ

6. ุจุนุฏ ุงุฒ ุงุฌุฑุงุ ูุงู ุฑุง ุญุฐู ฺฉูุฏ (ุงููุช)
```

---

### ุฑูุด 3๏ธโฃ: ุฏุณุช ุจุง phpMyAdmin (ูพุดุฑูุชู)

```sql
-- ูุฏู 1: ุญุฐู ุฌุฏูู ูุฏู (ุงฺฏุฑ ูุฌูุฏ ุฏุงุฑุฏ)
DROP TABLE IF EXISTS wp_cooperation_contracts;

-- ูุฏู 2: ุงุฌุงุฏ ุฌุฏูู ุฌุฏุฏ
CREATE TABLE wp_cooperation_contracts (
    id mediumint(9) NOT NULL AUTO_INCREMENT,
    first_name varchar(100) NOT NULL DEFAULT '',
    last_name varchar(100) NOT NULL DEFAULT '',
    national_id varchar(10) NOT NULL DEFAULT '',
    institution_name varchar(255) NOT NULL DEFAULT '',
    position varchar(100) NOT NULL DEFAULT '',
    address text NOT NULL,
    contract_date varchar(100) NOT NULL DEFAULT '',
    selected_plan varchar(50) NOT NULL DEFAULT '',
    signature_data longtext NOT NULL,
    created_at datetime DEFAULT CURRENT_TIMESTAMP,
    user_id bigint(20) DEFAULT NULL,
    ip_address varchar(45) DEFAULT NULL,
    PRIMARY KEY (id),
    KEY national_id (national_id),
    KEY created_at (created_at)
) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

**ุชูุฌู**: `wp_` ุฑุง ุจุง prefix ุฏุชุงุจุณ ุฎูุฏ ุฌุงฺฏุฒู ฺฉูุฏ.

---

## ๐ Debug ู ุจุฑุฑุณ:

### ฺฺฉ ฺฉุฑุฏู ูุงฺฏโูุง:

```
1. ุจู FTP ูุชุตู ุดูุฏ
2. ูุงู wp-content/debug.log ุฑุง ุจุงุฒ ฺฉูุฏ
3. ุฏูุจุงู ุฎุทูุท ุจุง "CC Error:" ุจฺฏุฑุฏุฏ
4. ุจุจูุฏ ฺู ุฎุทุง ูุณุช
```

### ุฎุทุงูุง ุฑุงุฌ ุฏุฑ log:

**1. "Table does not exist"**
```
ุฑุงูโุญู: ุฑูุด 1 ุง 2 ุจุงูุง
```

**2. "Empty required field"**
```
ุฑุงูโุญู: ูุดฺฉู ุงุฒ ูุฑู ุงุณุชุ ูู ุฏุชุงุจุณ
ุชูุงู ููุฏูุง ุฑุง ูพุฑ ฺฉูุฏ
```

**3. "Database insert failed"**
```
ุฑุงูโุญู: permissions ุฏุชุงุจุณ ุฑุง ฺฺฉ ฺฉูุฏ
user ุฏุชุงุจุณ ุจุงุฏ INSERT permission ุฏุงุดุชู ุจุงุดุฏ
```

---

## ๐งช ุชุณุช ฺฉูุฏ:

ุจุนุฏ ุงุฒ ุงุนูุงู ฺฉ ุงุฒ ุฑูุดโูุง ุจุงูุง:

```
1. ุตูุญู ูุฑุงุฑุฏุงุฏ ุฑุง ุจุงุฒ ฺฉูุฏ
2. ูุฑู ุฑุง ฺฉุงูู ูพุฑ ฺฉูุฏ:
   - ูุงู: ุชุณุช
   - ูุงู ุฎุงููุงุฏฺฏ: ุชุณุช
   - ฺฉุฏ ูู: 1234567890
   - ูุงู ุขููุฒุดฺฏุงู: ุชุณุช
   - ุณูุช: ุชุณุช
   - ุขุฏุฑุณ: ุชุณุช
   - ุชุงุฑุฎ: ุงูุชุฎุงุจ ฺฉูุฏ
   - ุทุฑุญ: ฺฉ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
   - ุงูุถุง: ุจฺฉุดุฏ

3. Submit ฺฉูุฏ

4. ุงฺฏุฑ ูููู ุจูุฏ:
   โ ูพุบุงู ุณุจุฒ ููููุช
   โ ุฏุฑ ูพูู ูุฏุฑุช โ ูุฑุงุฑุฏุงุฏูุง ููฺฉุงุฑ ุธุงูุฑ ูโุดูุฏ
```

---

## ๐ก ุชุบุฑุงุช ุงุนูุงู ุดุฏู ุฏุฑ ฺฉุฏ:

### 1. ุจูุจูุฏ create_tables:
```php
โ ุญุฐู "IF NOT EXISTS" (ุจุฑุง dbDelta)
โ ุงุถุงูู DEFAULT values
โ ุงุถุงูู INDEX ูุง
โ ุจุฑุฑุณ ููููุช
```

### 2. ุจูุจูุฏ save_contract:
```php
โ ฺฺฉ ฺฉุฑุฏู ูุฌูุฏ ุฌุฏูู
โ ุงุฌุงุฏ ุฎูุฏฺฉุงุฑ ุงฺฏุฑ ูุณุช
โ Logging ุฏููโุชุฑ
โ ุจุฑุฑุณ ุชูุงู ููุฏูุง
โ Error handling ุจูุชุฑ
```

### 3. ุงุถุงูู ุดุฏู fix-database.php:
```php
โ ุงุณฺฉุฑูพุช ุฎูุฏฺฉุงุฑ ุจุฑุง ุฑูุน ูุดฺฉู
โ ููุงุด ุงุทูุงุนุงุช ุฌุฏูู
โ Drop ู recreate
โ Verification
```

---

## ๐ฆ ูุงู ุฌุฏุฏ:

โ **cooperation-contract.zip** (57KB)  
โ **ูุณุฎู**: 3.0.3 - Database Fix  
โ **ุดุงูู**: fix-database.php  
โ **ุชุบุฑุงุช**: 
- ุจูุจูุฏ create_tables
- ุจูุจูุฏ save_contract
- ุงุถุงูู logging
- ุงุถุงูู fix script  

---

## ๐ฏ ุฎูุงุตู:

ุงฺฏุฑ ุฎุทุง ุฏุชุงุจุณ ุฏุงุฑุฏ:

```
1๏ธโฃ ุณุงุฏู: ุบุฑูุนุงู/ูุนุงู ุงูุฒููู
2๏ธโฃ ุญุฑููโุง: ุงุฌุฑุง fix-database.php
3๏ธโฃ ูพุดุฑูุชู: SQL ุฏุณุช ุฏุฑ phpMyAdmin
```

ฺฉ ุงุฒ ุงูโูุง ูุทุนุงู ูุดฺฉู ุฑุง ุญู ูโฺฉูุฏ! โ

---

## โ๏ธ ูฺฉุชู ุงููุช:

ุจุนุฏ ุงุฒ ุงุฌุฑุง `fix-database.php`:
```
โ ุญุชูุงู ุขู ุฑุง ุญุฐู ฺฉูุฏ
โ ูฺฏู ูุฏุงุดุชู ุขู ุฎุทุฑ ุงููุช ุฏุงุฑุฏ
```

---

**ุงูุงู ฺฉ ุงุฒ ุฑูุดโูุง ุฑุง ุงูุชุญุงู ฺฉูุฏ!** ๐

ุงู ุจุงุฑ ุฏุชุงุจุณ ูุทุนุงู ฺฉุงุฑ ูโฺฉูุฏ! โจ
